% 5.4.6.RevisionInfo.tex
%	Last update: 2018/08/30 F.Kanehori
%\newpage
\subsubsection{RevisionInfo}
\label{subsubsec:RevisionInfo}

\bigskip
\Invoke[b]{
     > python RevisionInfo.py [options] \{HEAD|all|commit-id\}
}
\begin{Opts}[b]
    \Item[t]{-G $^{(1)}$}{Github (GitHub.com)を対象とする}
    \Item[t]{-H $^{(2)}$}{Gitlab (git.haselab.net)を対象とする}
    \Item[t]{-f fname}{指定したレビジョンから取得するファイル名}
\end{Opts}
\begin{Table}[r][1.5em]{ll}
  \Item{$^{(1)}$}{Springheadのレポジトリである}
  \Item{$^{(2)}$}{DailyBuild/Resultのレポジトリである}
\end{Table}
\begin{Args}[b]
    \Item[t]{HEAD}{リモートHEADを対象とする}
    \Item[t]{all}{すべてのリモートレビジョンを対象とする}
    \Item[t]{commit-id}{指定したリモートレビジョンを対象とする}
\end{Args}

\begin{Proc}[b]
\begin{enumerate}
  \item	このプログラムは\Path{core/test}から起動されることを前提としている。

  \item	gitには、その管理下にあるディレクトリからアクセスしないといけない。
	以下に、指定されたオプションと管理下ディレクトリの対応を示す。
	\begin{narrow}[\WID]
	    \begin{LocalScope}\tabcolsep=10pt
	    \begin{tabular}{|ll@{ $\Leftrightarrow$ }l|}\hline
		\tt{-G} & \tt{url}
			& \tt{http://github.com/sprphys/Springhead/}\\
			& \tt{dir}
			& \Path{../../../../Springhead}\\\hline
		\tt{-H}	& \tt{url}
			& \tt{http://git.haselab.net/DailyBuild/Result/}\\
			& \tt{dir}
			& \Path{../../../../DailyBuildResult/Result}\\\hline
	    \end{tabular}
	    \end{LocalScope}
	\end{narrow}
	\Vskip{.5\baselineskip}

  \item	オプション\SQuote{\tt{-G}}が指定された場合
	\begin{enumerate}
	  \item	オプション\SQuote{\tt{-f fname}}が指定された場合\\
		引数で指定されたレビジョン
		(\SQuote{\tt{all}}の場合は全レビジョン)から
		\tt{fname}で指定されたファイルを取得し、
		次の形式で標準出力に出力する。

		\medskip
		\begin{narrow}
		\framebox{\begin{tabular}{@{\Hskip{5pt}}l@{\Hskip{5pt}}}
		    \tt{--[\it{short-id,long-id,YYYY-mmdd,HH:MM:ss}]--}\\
		    取得したファイルの内容
		\end{tabular}}
		\end{narrow}

		\medskip
		\it{short-id}はコミットIDの短縮形式、
		\it{long-id}はコミットIDを表す。\\
		引数\SQuote{\tt{all}}が指定された場合は、
		上記の形式を全レビジョンに対して繰り返す。

	  \item	オプション\SQuote{\tt{-f fname}}が指定されない場合\\
		引数で指定されたレビジョン
		(\SQuote{\tt{all}}の場合は全レビジョン)について、
		次の情報を標準出力に出力する。

		\medskip
		\begin{narrow}
		\framebox{\begin{tabular}{@{\Hskip{5pt}}l@{\Hskip{5pt}}}
		    \it{short-id,long-id,YYYY-mmdd,HH:MM:SS}
		\end{tabular}}
		\end{narrow}

		\medskip
		\it{short-id}はコミットIDの短縮形式、
		\it{long-id}はコミットIDを表す。\\
		引数\SQuote{\tt{all}}が指定された場合は、上記の形式を全レビジョンに
		対して繰り返す。
	\end{enumerate}
\end{enumerate}
\end{Proc}

% end: 5.4.6.RevisionInfo.tex
