% 6.3.1.MakeReport.tex
%	Last update: 2018/06/19 F.Kanehori
%\newpage
\subsubsection{MakeReportGit.bat}
\label{subsubsec:MakeReportGit}

\medskip
\noindent
タスクMakeReportを実行するためのスクリプト(Windowsバッチファイル)。
DailyBuildの結果(ログファイル)から、
基準とするレビジョンの実行結果との差分情報をレポートファイルとして作成する。
この情報はWikiの``開発者向け情報''のページから参照できる。
\begin{narrow}[s]
	URL:\hspace{5pt}\tt{http://springhead.info/wiki/index.php?devel}\\
	\relax[開発版] − [今朝のビルド] − [レビジョン \CDOTS との比較]
\end{narrow}

\bigskip
\noindent
起動方法
\Cmnd{4pt}{MakeReportGit.bat [options] [xxxx:yyyy]}{-8pt}

\begin{CmndOpts}[5em]
    \CmndOpt{-c}{レポートファイルをウェブにコピーする}
    \CmndOpt{-k}{作業ファイルを残す}
    \CmndOpt{-s}{サイレントモード}
    \CmndOpt{-D n}{デバッグレベル設定}
\end{CmndOpts}

\begin{CmndArgs}[4em]
    \CmndArg{xxxx}{比較対象レビジョン(ファイル\Path{revision.old}の内容)\,\NOTE}
    \CmndArg{yyyy}{レポート対象レビジョン(ファイル\Path{revision.new}の内容)\,\NOTE}
\end{CmndArgs}

\begin{Process}
\begin{enumerate}
  \item	ローカルホスト上でコマンドを実行\\
        ディレクトリ\Path{Monitoring}に移動して\Path{build_monitor_Git.bat}を実行し、
	レポートファイルを作成する。\\
	\Cmnd{-.8\baselineskip}
	     {cmd /c /binbuild_monitor_Git \it{args}}
	     {-.7\baselineskip}\\
	\it{args}には、起動時に指定された引数を渡す(\tt{-c, -s}は除く)。
        詳細は\ref{subsubsec:buildmonitorGit} build_monitor_Gitを参照のこと。
	\medskip

  \item	コピー元/先のディレクトリの定義\\
	コピー先ディレクトリ
	\begin{narrow}[\WID]
		\def\YA{\hspace{5pt}\LARROW\hspace{5pt}}
		\tt{REPBASE}\YA\verb|I:\DailyBuild\Springhead\core\test\report|\\
		\tt{WABBASE}\YA\verb|\\haselab\HomeDirs\WWW\docroots\|\CONT\\
		\hspace{120pt}\verb|springhead\dailybuild|
	\end{narrow}
	\medskip

  \item	オプション引数\tt{-c}が指定されていたらウェブサーバにファイルをコピー\\
	コピーするファイルのローカルでの名称とウェブ上での名称は次のとおり。
	\vspace{-.5\baselineskip}
	\small{\begin{longtable}{@{\hspace{40pt}}l@{\hspace{5pt}\RARROW\hspace{5pt}}l}
		\Path{[\it{日付}].report}
			& \verb|"[WEBBASE]\Test.report"|\\
		\Path{[\it{日付}].bldlog.diff}
			& \verb|"[WEBBASE]\report\Build.log.diff"|\\
		\Path{[\it{日付}].stblog.diff}
			& \verb|"[WEBBASE]\rerpot\StubBuild.log.diff"|\\
		\Path{[\it{日付}].runlog.diff}
			& \verb|"[WEBBASE]\rerpot\Run.log.diff"|\\
		\Path{[\it{日付}].spllog.diff}
			& \verb|"[WEBBASE]\rerpot\SamplesBuild.log.diff"|\\
	\end{longtable}}
	\vspace{-.5\baselineskip}

  \item	ローカルのファイルを削除\\
	オプション引数\tt{-k}が指定されていない限り、
	ローカルに作成したファイルを削除する。

\end{enumerate}
\end{Process}

% end: 6.3.1.MakeReportGit.tex
