% 6.3.8.awkscripts.tex
%	Last update: 2018/07/12 F.Kanehori
%\newpage
\subsubsection{awkscripts}
\label{subsubsec:awkscripts}

\medskip
\noindent
ここでは、awkで記述されたスクリプトについて述べる。
いずれもWindowsバッチファイルから呼び出されるコマンドとして動作する。

\begin{Methods}{awkスクリプト}
\begin{Method}{exclude.awk}
    \noindent 起動方法
    \Vskip{.1\baselineskip}%
    \CmndBox{1em}{> awk -f exclude.awk \it{infile}}
    \begin{Brief}[r]
	レポート作成に不要な行を削除するためのスクリプト。
	ただし現在は削除を行なっていない(すべての行を出力している)。
    \end{Brief}
\end{Method}
\begin{Method}{field.awk}
    \noindent 起動方法
    \Vskip{.1\baselineskip}%
    \CmndBox{1em}{> awk -f field.awk -v {\small \rm{変数}=\rm{値}} < \it{infile}}
    \begin{Opts}[r][6em]
	\Item[t]{-v 変数=値}{変数に値を割り当てて実行する。\\
		変数には、位置を示す変数(\tt{block, field, start})と
		区切り文字を示す変数(\tt{sep1, sep2})とがある。}
    \end{Opts}
    \begin{Brief}[r]
	\begin{description}
	  \item[区切り文字\tt{sep2}が指定されない場合]
		入力行を区切り文字\tt{sep1}(指定がなければ空白文字)で分割して、
		その\tt{field}番目(指定がなければ1番目)の要素を返す。
	  \item[区切り文字\tt{sep2}が指定された場合]
		入力行を区切り文字\tt{sep2}で分割し、
		その\tt{block}番目(指定がなければ1番目)の要素をさらに
		区切り文字\tt{sep1}(指定がなければ空白文字)で分割して、
		その\tt{field}番目(指定がなければ1番目)の要素を返す。
	\end{description}
    \end{Brief}
\end{Method}
\begin{Method}{grep.awk}
    \noindent 起動方法
    \Vskip{.1\baselineskip}%
    \CmndBox{1em}{> awk -f field.awk -v {\small \rm{変数}=\rm{値}} < \it{infile}}
    \begin{Opts}[r][6em]
	\Item[t]{-v 変数=値}{変数に値を割り当てて実行する。\\
		変数は\tt{pat}のみである。}
    \end{Opts}
    \begin{Brief}[r]
	\begin{description}
	  \item[変数\tt{pat}が\DQuote{rev}の場合]
		行頭から、
		\begin{narrow}[\WID]\begin{enumerate}
		  \item	文字\tt{'r'}に続いて数字が並んでいる
		  \item	英数字が並んでいる
		\end{enumerate}\end{narrow}
		行のみを出力する。
	  \item[変数\tt{pat}が\DQuote{head}の場合]
		行頭が\tt{HEAD}となっている行のみを出力する。
	\end{description}
    \end{Brief}
\end{Method}
\end{Methods}

% end: 6.3.8.awkscripts.tex
